{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./Quiz-Rank.css';// Đảm bảo file CSS đã được thêm\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CharityRank(_ref){let{charityID}=_ref;const[contributors,setContributors]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const apiKey='oqKbBxKcEn9l4IXE4EqS2sgNzXPFvE';useEffect(()=>{const fetchContributors=async()=>{try{if(!charityID){throw new Error('CharityID is not provided.');}const response=await fetch(\"http://admin.tducoin.com/api/charity/getUsersByCharityID/\".concat(charityID),{method:'GET',headers:{'x-api-key':apiKey,'Content-Type':'application/json'}});if(!response.ok){throw new Error(\"Error: \".concat(response.statusText));}const data=await response.json();if(data&&data.data){// Sắp xếp contributors theo charity_amount giảm dần và giới hạn 10 người đầu tiên\nconst sortedContributors=data.data.sort((a,b)=>b.charity_amount-a.charity_amount)// Sắp xếp giảm dần\n.slice(0,10);// Lấy 10 người đầu tiên\nsetContributors(sortedContributors);}else{throw new Error('Invalid API response structure.');}}catch(err){setError(err.message);}finally{setLoading(false);}};fetchContributors();},[charityID]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});if(!contributors||contributors.length===0){return/*#__PURE__*/_jsx(\"div\",{children:\"Ch\\u01B0a c\\xF3 th\\xF4ng tin quy\\xEAn g\\xF3p n\\xE0o.\"});}const BASE_URL=\"http://admin.tducoin.com/public/storage/\";return/*#__PURE__*/_jsx(\"div\",{className:\"card-container\",children:contributors.map((contributor,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rank\",children:[\"#\",index+1]}),/*#__PURE__*/_jsx(\"div\",{className:\"quizrank-circle\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(BASE_URL).concat(contributor.user.avatar)||'/default-avatar.png',alt:\"Avatar \".concat(index+1),className:\"avatar-image\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-name\",children:contributor.user.name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-time\",children:contributor.charity_amount||'N/A'})]}),index<contributors.length-1&&/*#__PURE__*/_jsx(\"div\",{className:\"card-divider\"})]},contributor.id))});}export default CharityRank;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","CharityRank","_ref","charityID","contributors","setContributors","loading","setLoading","error","setError","apiKey","fetchContributors","Error","response","fetch","concat","method","headers","ok","statusText","data","json","sortedContributors","sort","a","b","charity_amount","slice","err","message","children","length","BASE_URL","className","map","contributor","index","src","user","avatar","alt","name","id"],"sources":["/Users/hcmhoh02hhul217/Documents/web/webapp-tada/src/components/Charity-Rank.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './Quiz-Rank.css'; // Đảm bảo file CSS đã được thêm\r\n\r\nfunction CharityRank({ charityID }) {\r\n  const [contributors, setContributors] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const apiKey = 'oqKbBxKcEn9l4IXE4EqS2sgNzXPFvE';\r\n\r\n  useEffect(() => {\r\n    const fetchContributors = async () => {\r\n      try {\r\n        if (!charityID) {\r\n          throw new Error('CharityID is not provided.');\r\n        }\r\n\r\n        const response = await fetch(`http://admin.tducoin.com/api/charity/getUsersByCharityID/${charityID}`, {\r\n          method: 'GET',\r\n          headers: {\r\n            'x-api-key': apiKey,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Error: ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        if (data && data.data) {\r\n          // Sắp xếp contributors theo charity_amount giảm dần và giới hạn 10 người đầu tiên\r\n          const sortedContributors = data.data\r\n            .sort((a, b) => b.charity_amount - a.charity_amount) // Sắp xếp giảm dần\r\n            .slice(0, 10); // Lấy 10 người đầu tiên\r\n          setContributors(sortedContributors);\r\n        } else {\r\n          throw new Error('Invalid API response structure.');\r\n        }\r\n      } catch (err) {\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchContributors();\r\n  }, [charityID]);\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error) return <div>Error: {error}</div>;\r\n\r\n  if (!contributors || contributors.length === 0) {\r\n    return <div>Chưa có thông tin quyên góp nào.</div>;\r\n  }\r\n\r\n  const BASE_URL = \"http://admin.tducoin.com/public/storage/\";\r\n\r\n  return (\r\n    <div className=\"card-container\">\r\n      {contributors.map((contributor, index) => (\r\n        <div key={contributor.id}>\r\n          <div className=\"card-row\">\r\n            <div className=\"left-section\">\r\n              <div className=\"rank\">#{index + 1}</div>\r\n              <div className=\"quizrank-circle\">\r\n                <img\r\n                  src={`${BASE_URL}${contributor.user.avatar}` || '/default-avatar.png'}\r\n                  alt={`Avatar ${index + 1}`}\r\n                  className=\"avatar-image\"\r\n                />\r\n              </div>\r\n              <div className=\"rank-name\">{contributor.user.name}</div>\r\n            </div>\r\n            <div className=\"rank-time\">{contributor.charity_amount || 'N/A'}</div>\r\n          </div>\r\n          {index < contributors.length - 1 && <div className=\"card-divider\"></div>}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CharityRank;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}